<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Spring Security</title>
</head>
<div class="nav-container sm-3" th:fragment="navbar">

	<nav class="navbar navbar-expand-md navbar-light bg-dark">
		<div class="container">

			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarNav" aria-controls="navbarNav"
				aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>

			<div class="collapse navbar-collapse" id="navbarNav">
				<ul class="navbar-nav mr-auto">
					<li class="nav-item"><a href="/" class="nav-link"
						style="color: white">Home</a></li>
				</ul>
				<ul class="navbar-nav d-none d-md-block">
					<li th:if="${profile}" class="nav-item dropdown"><a
						class="nav-link dropdown-toggle" href="#" id="profileDropDown"
						data-toggle="dropdown"> <img
							th:src="${profile.get('picture')}" alt="Profile picture"
							class="nav-user-profile rounded-circle" width="50" />
					</a>
						<div class="dropdown-menu dropdown-menu-left">

							<div class="dropdown-header" th:text="${profile.get('name')}"></div>
							<a href="/profile" class="dropdown-item dropdown-profile"> <i
								class="fas fa-user mr-3"></i> Profile
							</a> <a id="qsLogoutBtn" th:href="@{/logout}" class="dropdown-item">
								<i class="fas fa-power-off mr-3"></i> Log out
							</a>
						</div></li>
					<li th:unless="${profile}" class="nav-item"><a
						th:href="@{/oauth2/authorization/auth0}" id="qsLoginBtn"
						class="btn btn-primary btn-margin">Login</a></li>
				</ul>


				<ul th:if="${profile}"
					class="navbar-nav d-md-none justify-content-between"
					style="min-height: 120px;">
					<li class="nav-item"><span class="user-info"> <!-- Profile image should be set to the profile picture from the id token -->
							<img th:src="${profile.get('picture')}" alt="Profile picture"
							class="nav-user-profile d-inline-bloc rounded-circle mr-3"
							width="50" />

							<h6 class="d-inline-block" th:text="${profile.get('name')}"></h6>
					</span></li>
					<li><i class="fas fa-user mr-3"></i> <a th:href="@{/profile}">
							Profile</a></li>

					<li><i class="fas fa-power-off mr-3"></i> <a
						th:href="@{/logout}"> Log out</a></li>
				</ul>


				<ul th:unless="${profile}" class="navbar-nav d-md-none">
					<a th:href="@{/oauth2/authorization/auth0}" id="qsLoginBtn"
						class="btn btn-primary btn-block">Login</a>
				</ul>

			</div>
		</div>
	</nav>
</div>
</html>